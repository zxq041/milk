<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MilkShake System 1.0 (Frontend)</title>
    <meta name="description" content="System do zarzÄ…dzania Twoim biznesem.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        :root {
            --primary-color: #00A79D;
            --secondary-color: #FF6B6B;
            --accent-color: #F7C59F;
            --background-light: #FFF8E7;
            --background-dark: #003B46;
            --text-color-dark: #07575B;
            --text-color-light: #f5f5f5;
            --gradient-bg: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            --shadow: 0px 10px 30px rgba(0, 0, 0, 0.1);
            --border-radius: 20px;
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            color: var(--text-color-dark);
            background-color: var(--background-light);
            overflow-x: hidden;
        }

        .admin-wrapper {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            flex-shrink: 0;
            background-color: var(--background-dark);
            color: var(--text-color-light);
            display: flex;
            flex-direction: column;
            padding: 20px;
            transition: transform 0.3s ease-in-out;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            margin-bottom: 30px;
        }

        .sidebar-header img {
            width: 50px;
            height: 50px;
            border-radius: 12px;
        }

        .sidebar-header .title-block {
            line-height: 1.2;
        }

        .sidebar-header .title {
            font-weight: 700;
            font-size: 1.2rem;
            color: #fff;
        }
        
        .sidebar-header .subtitle {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .sidebar-nav {
            list-style: none;
            flex-grow: 1;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 18px 20px;
            margin-bottom: 10px;
            border-radius: 12px;
            text-decoration: none;
            color: var(--text-color-light);
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .nav-link.active {
            background: var(--gradient-bg);
            color: #fff;
            box-shadow: 0 4px 20px rgba(0, 167, 157, 0.4);
            transform: scale(1.02);
        }
        
        .nav-link i {
            width: 20px;
            text-align: center;
        }
        
        .main-content {
            flex-grow: 1;
            padding: 40px;
            overflow-y: auto;
        }

        .main-header {
            display: none; /* Ukryty na desktopie */
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .menu-toggle-btn {
            background: #fff;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            box-shadow: var(--shadow);
            color: var(--primary-color);
            font-size: 1.2rem;
            cursor: pointer;
        }
        
        .section-title {
            font-size: clamp(2rem, 4vw, 2.5rem);
            font-weight: 900;
            margin-bottom: 30px;
            background: var(--gradient-bg);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .section-header .section-title {
            margin: 0;
        }

        .card {
            background: #fff;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }
        
        .btn {
            padding: 14px 30px;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: var(--gradient-bg);
            color: white;
            box-shadow: 0 4px 20px rgba(0, 167, 157, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 167, 157, 0.6);
        }
        
        .btn-secondary {
            background: #eee;
            color: var(--text-color-dark);
        }
        
        .btn-secondary:hover {
            background: #ddd;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }
        
        .category-tile {
            background: #fff;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            text-align: center;
            text-decoration: none;
            color: var(--text-color-dark);
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 150px;
        }
        
        .category-tile:hover {
            transform: translateY(-10px);
            box-shadow: 0px 15px 35px rgba(0, 0, 0, 0.15);
            border: 2px solid var(--primary-color);
            padding: 18px;
        }
        
        .category-tile h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .category-tile span {
            font-size: 0.9rem;
            color: var(--primary-color);
            font-weight: 600;
        }

        .employee-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        .employee-item:last-child {
            border-bottom: none;
        }
        
        .employee-item-name {
            font-weight: 700;
            font-size: 1.2rem;
        }
        .employee-item-details {
            display: flex;
            align-items: center;
            gap: 25px;
        }
        .employee-item-details span {
            font-size: 0.9rem;
            color: #555;
        }
        .employee-item-details b {
            font-weight: 700;
            color: var(--text-color-dark);
        }

        .product-card {
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-10px);
        }
        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .product-card-content {
            padding: 20px;
        }
        .product-card-name {
            font-weight: 700;
            font-size: 1.3rem;
        }
        .product-card-price {
            font-size: 1.8rem;
            font-weight: 900;
            margin-top: 10px;
            background: var(--gradient-bg);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .modal {
            position: fixed;
            inset: 0;
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 59, 70, 0.6);
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: #fff;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 600px; 
            padding: 40px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .form-group { margin-bottom: 20px; }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 15px 20px; 
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            background: #f9f9f9;
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .form-grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .demand-fieldset {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .demand-fieldset legend {
            padding: 0 10px;
            margin-left: 10px;
            font-weight: 600;
        }
        
        .demand-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            text-align: center;
        }
        .demand-grid input {
            padding: 8px 4px;
            font-size: 0.9rem;
            text-align: center;
        }
        .demand-grid label {
            font-size: 0.8rem;
            font-weight: 600;
        }

        .demand-grid input::-webkit-outer-spin-button,
        .demand-grid input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .demand-grid input[type=number] {
            -moz-appearance: textfield;
        }


        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
        }

        /* --- STYLE RESPONSIVE --- */
        @media (max-width: 800px) {
            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                height: 100%;
                z-index: 1001;
                transform: translateX(-100%);
            }

            .sidebar.is-open {
                transform: translateX(0);
            }

            .main-content {
                padding: 20px;
            }

            .main-header {
                display: flex;
            }

            .section-title {
                font-size: 1.8rem;
            }

            .employee-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            .employee-item-details {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .modal-content {
                width: 95%;
                padding: 25px;
            }

            .form-grid-2 {
                grid-template-columns: 1fr;
            }

            .demand-grid {
                grid-template-columns: repeat(4, 1fr); /* 4 dni w rzÄ™dzie na mobilce */
            }

            .btn {
                padding: 12px 25px;
            }
        }

    </style>
</head>
<body>

    <div class="admin-wrapper">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="https://i.imgur.com/EV2m6BO.jpeg" alt="logo">
                <div class="title-block">
                    <div class="title">MilkShake System</div>
                    <div class="subtitle">Wersja 1.0</div>
                </div>
            </div>
            
            <nav id="main-nav" class="sidebar-nav">
                <a href="#nowe-zamowienie" class="nav-link active">
                    <i class="fas fa-plus-circle"></i><span>Nowe ZamÃ³wienie</span>
                </a>
                 <a href="#zamowienia" class="nav-link">
                    <i class="fas fa-clipboard-list"></i><span>ZamÃ³wienia</span>
                </a>
                <a href="#rezerwacje" class="nav-link">
                    <i class="fas fa-calendar-alt"></i><span>Rezerwacje</span>
                </a>
                <a href="#pracownicy" class="nav-link">
                    <i class="fas fa-users"></i><span>Pracownicy</span>
                </a>
                <a href="#produkty" class="nav-link">
                    <i class="fas fa-box-open"></i><span>Produkty</span>
                </a>
                <a href="#finanse" class="nav-link">
                    <i class="fas fa-dollar-sign"></i><span>Finanse</span>
                </a>
                 <a href="#aktywnosc" class="nav-link">
                    <i class="fas fa-chart-line"></i><span>AktywnoÅ›Ä‡</span>
                </a>
            </nav>
        </aside>

        <main class="main-content">
            <header class="main-header">
                <button id="menu-toggle" class="menu-toggle-btn">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 id="page-title" class="section-title" style="margin: 0; font-size: 1.5rem;"></h1>
            </header>

            <div id="content-nowe-zamowienie" class="content-section">
                <div class="section-header">
                    <h1 class="section-title">Nowe ZamÃ³wienie</h1>
                </div>
                <p style="margin-bottom: 30px;">Wybierz kategoriÄ™, aby rozpoczÄ…Ä‡ kompletowanie zamÃ³wienia.</p>
                <div class="grid-container">
                    <a href="#" class="category-tile"><h3>MroÅºnia 1</h3><span>(Frytki)</span></a>
                    <a href="#" class="category-tile"><h3>MroÅºnia 2</h3><span>(Bar)</span></a>
                    <a href="#" class="category-tile"><h3>MroÅºnia 3</h3><span>(MiÄ™so)</span></a>
                    <a href="#" class="category-tile"><h3>MroÅºnia 4</h3><span>(Produkty)</span></a>
                    <a href="#" class="category-tile"><h3>ChÅ‚odnia</h3><span>&nbsp;</span></a>
                    <a href="#" class="category-tile"><h3>Magazyn Suchy</h3><span>&nbsp;</span></a>
                    <a href="#" class="category-tile"><h3>Magazyn Suchy</h3><span>(Bar)</span></a>
                    <a href="#" class="category-tile"><h3>Opakowania</h3><span>&nbsp;</span></a>
                    <a href="#" class="category-tile"><h3>Warzywa i Owoce</h3><span>&nbsp;</span></a>
                    <a href="#" class="category-tile"><h3>Mix</h3><span>&nbsp;</span></a>
                </div>
            </div>

             <div id="content-zamowienia" class="content-section" style="display: none;">
                <h1 class="section-title">Historia ZamÃ³wieÅ„</h1>
                <p>Lista wszystkich dotychczasowych zamÃ³wieÅ„.</p>
            </div>

            <div id="content-rezerwacje" class="content-section" style="display: none;">
                <h1 class="section-title">ZarzÄ…dzanie rezerwacjami</h1>
                <div id="reservations-list" class="grid-container"></div>
            </div>

            <div id="content-pracownicy" class="content-section" style="display: none;">
                 <div class="section-header">
                    <h1 class="section-title">Lista pracownikÃ³w</h1>
                    <button id="add-employee-btn" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        <span>Dodaj pracownika</span>
                    </button>
                 </div>
                 <div id="employees-list" class="card"></div>
            </div>

            <div id="content-produkty" class="content-section" style="display: none;">
                 <div class="section-header">
                    <h1 class="section-title">Lista produktÃ³w</h1>
                    <button id="add-product-btn" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        <span>Dodaj produkt</span>
                    </button>
                 </div>
                 <div id="products-list" class="grid-container"></div>
            </div>

            <div id="content-finanse" class="content-section" style="display: none;">
                <h1 class="section-title">Finanse</h1>
                <p>Raporty finansowe, podsumowania sprzedaÅ¼y, etc.</p>
            </div>

            <div id="content-aktywnosc" class="content-section" style="display: none;">
                <h1 class="section-title">Dziennik AktywnoÅ›ci</h1>
                <p>Logi systemowe, ostatnie dziaÅ‚ania uÅ¼ytkownikÃ³w, etc.</p>
            </div>
        </main>
    </div>
    
    <div id="add-product-modal" class="modal">
        <div class="modal-content">
            <h2 class="section-title" style="text-align: center; font-size: 2rem;">Dodaj nowy produkt</h2>
            <form id="add-product-form">
                <div class="form-group">
                    <input type="text" name="name" placeholder="Nazwa Produktu" required>
                </div>
                 <div class="form-grid-2">
                    <div class="form-group">
                        <input type="number" name="packageSize" placeholder="IloÅ›Ä‡ w paczce (opcjonalne)" step="any">
                    </div>
                    <div class="form-group">
                        <select name="unit" required>
                            <option value="" disabled selected>Wybierz jednostkÄ™...</option>
                            <option value="szt">szt (Sztuka)</option>
                            <option value="Kg">Kg (Kilogram)</option>
                            <option value="L">L (Litr)</option>
                        </select>
                    </div>
                </div>

                <fieldset class="demand-fieldset">
                    <legend>Zapotrzebowanie na kaÅ¼dy dzieÅ„ tygodnia</legend>
                    <div class="demand-grid">
                        <div><label for="demand_mon">PN</label><input type="number" id="demand_mon" class="demand-input" min="0" value="0"></div>
                        <div><label for="demand_tue">WT</label><input type="number" id="demand_tue" class="demand-input" min="0" value="0"></div>
                        <div><label for="demand_wed">ÅšR</label><input type="number" id="demand_wed" class="demand-input" min="0" value="0"></div>
                        <div><label for="demand_thu">CZ</label><input type="number" id="demand_thu" class="demand-input" min="0" value="0"></div>
                        <div><label for="demand_fri">PT</label><input type="number" id="demand_fri" class="demand-input" min="0" value="0"></div>
                        <div><label for="demand_sat">SB</label><input type="number" id="demand_sat" class="demand-input" min="0" value="0"></div>
                        <div><label for="demand_sun">ND</label><input type="number" id="demand_sun" class="demand-input" min="0" value="0"></div>
                    </div>
                </fieldset>
                <input type="hidden" name="demand" id="total-demand">

                <div class="form-group">
                    <input type="text" name="supplier" placeholder="Dostawca" required>
                </div>
                 <div class="form-group">
                    <input type="text" name="altSupplier" placeholder="Alternatywny dostawca (opcjonalnie)">
                </div>

                <div class="form-group">
                    <label for="imageFile">ZdjÄ™cie produktu</label>
                    <input type="file" name="imageFile" id="imageFile" accept="image/*">
                </div>

                <input type="hidden" name="category" value="DomyÅ›lna">
                <input type="hidden" name="pricePerUnit" value="0">

                <div class="modal-actions">
                    <button type="button" id="cancel-add-product" class="btn btn-secondary">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Dodaj produkt</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="edit-employee-modal" class="modal">
        <div class="modal-content">
            <h2 class="section-title" style="text-align: center; font-size: 2rem;">Edytuj pracownika</h2>
            <form id="edit-employee-form">
                <input type="hidden" id="edit-employee-id" name="id">
                <div class="form-group">
                    <label for="edit-employee-name">Nazwa uÅ¼ytkownika</label>
                    <input type="text" id="edit-employee-name" name="name" required>
                </div>
                 <div class="form-group">
                    <label for="edit-employee-login">Login</label>
                    <input type="text" id="edit-employee-login" name="login" required>
                </div>
                <div class="form-grid-2">
                    <div class="form-group">
                        <label for="edit-employee-position">Stanowisko</label>
                        <select id="edit-employee-position" name="position" required></select>
                    </div>
                    <div class="form-group">
                        <label for="edit-employee-workplace">Miejsce pracy</label>
                        <select id="edit-employee-workplace" name="workplace" required></select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="edit-employee-hourlyRate">Stawka godzinowa (zÅ‚)</label>
                    <input type="number" step="0.01" id="edit-employee-hourlyRate" name="hourlyRate" required>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancel-edit-employee" class="btn btn-secondary">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Zapisz</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="add-employee-modal" class="modal">
        <div class="modal-content">
            <h2 class="section-title" style="text-align: center; font-size: 2rem;">Dodaj pracownika</h2>
            <form id="add-employee-form">
                <div class="form-group">
                    <input type="text" name="name" placeholder="Nazwa uÅ¼ytkownika" required>
                </div>
                <div class="form-group">
                    <input type="text" name="login" placeholder="Login" required>
                </div>
                 <div class="form-grid-2">
                    <div class="form-group">
                        <select name="position" required>
                            <option value="" disabled selected>Wybierz stanowisko...</option>
                            <option value="WÅ‚aÅ›ciciel">WÅ‚aÅ›ciciel</option>
                            <option value="Manager">Manager</option>
                            <option value="Szef kuchni">Szef kuchni</option>
                            <option value="Kucharz">Kucharz</option>
                            <option value="Pomoc kuchenna">Pomoc kuchenna</option>
                            <option value="Kelner/ka">Kelner/ka</option>
                            <option value="Praktykant/ka">Praktykant/ka</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <select name="workplace" required>
                            <option value="" disabled selected>Wybierz miejsce pracy...</option>
                            <option value="Kuchnia">Kuchnia</option>
                            <option value="Bar">Bar</option>
                            <option value="Wszystkie">Wszystkie</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <input type="number" step="0.01" name="hourlyRate" placeholder="Stawka godzinowa (np. 30.50)" required>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancel-add-employee" class="btn btn-secondary">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Dodaj</button>
                </div>
            </form>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sidebar = document.getElementById('sidebar');
            const menuToggleBtn = document.getElementById('menu-toggle');
            const pageTitle = document.getElementById('page-title');
            const mainNav = document.getElementById('main-nav');
            const contentSections = document.querySelectorAll('.content-section');
            const navLinks = document.querySelectorAll('.nav-link');
            
            let appData = {
                users: [
                    {_id: '1', name: 'Jan Kowalski', login: 'jan', position: 'Manager', workplace: 'Wszystkie', hourlyRate: 45.50},
                    {_id: '2', name: 'Anna Nowak', login: 'anna', position: 'Kelner/ka', workplace: 'Bar', hourlyRate: 32.00},
                    {_id: '3', name: 'Piotr ZieliÅ„ski', login: 'piotr', position: 'Kucharz', workplace: 'Kuchnia', hourlyRate: 38.75}
                ],
                products: [
                    {_id: 'p1', name: 'Milkshake Truskawkowy', category: 'Napoje', pricePerUnit: 21.00, imageUrl: 'https://i.imgur.com/kfE4j7j.jpeg'},
                    {_id: 'p2', name: 'Gofr AmerykaÅ„ski', category: 'Desery', pricePerUnit: 24.50, imageUrl: 'https://i.imgur.com/dsMynF5.png'},
                    {_id: 'p3', name: 'Lemoniada', category: 'Napoje', pricePerUnit: 15.00, imageUrl: 'https://i.imgur.com/7Bx2X7g.png'},
                ],
                reservations: [
                    {name: 'Grupa Biesiadna', guests: 5, phone: '500-100-200', date: '2025-09-16', time: '18:00'},
                    {name: 'Katarzyna', guests: 2, phone: '600-700-800', date: '2025-09-17', time: '20:30'}
                ]
            };
            
            const positionOptions = ["WÅ‚aÅ›ciciel", "Manager", "Szef kuchni", "Kucharz", "Pomoc kuchenna", "Kelner/ka", "Praktykant/ka"];
            const workplaceOptions = ["Kuchnia", "Bar", "Wszystkie"];

            function navigateTo(hash) {
                const cleanHash = hash ? hash.substring(1) : 'nowe-zamowienie';
                const targetId = 'content-' + cleanHash;
                
                contentSections.forEach(section => section.style.display = 'none');
                const activeSection = document.getElementById(targetId);
                if (activeSection) {
                    activeSection.style.display = 'block';
                } else {
                    document.getElementById('content-nowe-zamowienie').style.display = 'block';
                }
                
                let activeLink = null;
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === hash) {
                        link.classList.add('active');
                        activeLink = link;
                    }
                });

                if (!activeLink) {
                    navLinks[0].classList.add('active');
                    activeLink = navLinks[0];
                }
                
                pageTitle.textContent = activeLink.querySelector('span').textContent;

                if(window.innerWidth <= 800) {
                    sidebar.classList.remove('is-open');
                }

                switch(hash) {
                    case '#rezerwacje': renderReservations(); break;
                    case '#pracownicy': renderEmployees(); break;
                    case '#produkty': renderProducts(); break;
                }
            }
            
            mainNav.addEventListener('click', (e) => {
                const link = e.target.closest('a');
                if (link) {
                    e.preventDefault();
                    window.location.hash = link.getAttribute('href');
                }
            });
            window.addEventListener('hashchange', () => navigateTo(window.location.hash));
            menuToggleBtn.addEventListener('click', () => sidebar.classList.toggle('is-open'));

            function renderReservations() {
                const list = document.getElementById('reservations-list');
                list.innerHTML = '';
                if(appData.reservations.length === 0) {
                    list.innerHTML = `<p>Brak zaplanowanych rezerwacji.</p>`; return;
                }
                appData.reservations.forEach(res => {
                    list.innerHTML += `
                        <div class="card">
                            <h3>${res.name} (${res.guests} os.)</h3>
                            <p>${res.phone}</p>
                            <p><b>Data:</b> ${res.date} | <b>Godzina:</b> ${res.time}</p>
                        </div>`;
                });
            }

            function renderEmployees() {
                const list = document.getElementById('employees-list');
                list.innerHTML = '';
                 if(appData.users.length === 0) {
                    list.innerHTML = `<p>Brak pracownikÃ³w w systemie.</p>`; return;
                }
                appData.users.forEach(user => {
                    const hours = Math.floor(Math.random() * 40) + 10;
                    const earnings = (hours * user.hourlyRate).toFixed(2);
                    list.innerHTML += `
                        <div class="employee-item">
                            <div class="employee-item-name">${user.name}</div>
                            <div class="employee-item-details">
                                <span>Godziny: <b>${hours}h</b></span>
                                <span>Zarobki: <b>${earnings} zÅ‚</b></span>
                                <button data-user='${JSON.stringify(user)}' class="btn btn-secondary edit-employee-btn">
                                    <i class="fas fa-pencil-alt"></i> Edytuj
                                </button>
                            </div>
                        </div>`;
                });
                 attachEditEmployeeListeners();
            }

            function renderProducts() {
                const list = document.getElementById('products-list');
                list.innerHTML = '';
                if(appData.products.length === 0) {
                    list.innerHTML = `<p>Brak produktÃ³w w systemie.</p>`; return;
                }
                appData.products.forEach(prod => {
                    list.innerHTML += `
                        <div class="card product-card">
                            <img src="${prod.imageUrl || 'https://via.placeholder.com/300'}" alt="${prod.name}">
                            <div class="product-card-content">
                                <h3 class="product-card-name">${prod.name}</h3>
                                <p>${prod.category}</p>
                                <div class="product-card-price">${prod.pricePerUnit ? prod.pricePerUnit.toFixed(2) : '0.00'} PLN</div>
                            </div>
                        </div>`;
                });
            }

            // --- Logika Modali ---
            
            const addProductModal = document.getElementById('add-product-modal');
            const addProductBtn = document.getElementById('add-product-btn');
            const cancelAddProductBtn = document.getElementById('cancel-add-product');
            const addProductForm = document.getElementById('add-product-form');

            addProductBtn.addEventListener('click', () => addProductModal.style.display = 'flex');
            cancelAddProductBtn.addEventListener('click', () => addProductModal.style.display = 'none');
            
            addProductForm.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Produkt zostaÅ‚by dodany (wersja frontend-only).');
                addProductModal.style.display = 'none';
                addProductForm.reset();
            });

            const addEmployeeModal = document.getElementById('add-employee-modal');
            const addEmployeeBtn = document.getElementById('add-employee-btn');
            const cancelAddEmployeeBtn = document.getElementById('cancel-add-employee');
            const addEmployeeForm = document.getElementById('add-employee-form');

            addEmployeeBtn.addEventListener('click', () => addEmployeeModal.style.display = 'flex');
            cancelAddEmployeeBtn.addEventListener('click', () => addEmployeeModal.style.display = 'none');
            
            addEmployeeForm.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Pracownik zostaÅ‚by dodany (wersja frontend-only).');
                addEmployeeModal.style.display = 'none';
                addEmployeeForm.reset();
            });

            const editEmployeeModal = document.getElementById('edit-employee-modal');
            const cancelEditEmployeeBtn = document.getElementById('cancel-edit-employee');
            const editEmployeeForm = document.getElementById('edit-employee-form');

            function populateSelect(selectElement, options, selectedValue) {
                selectElement.innerHTML = '';
                options.forEach(opt => {
                    const option = document.createElement('option');
                    option.value = opt;
                    option.textContent = opt;
                    if (opt === selectedValue) {
                        option.selected = true;
                    }
                    selectElement.appendChild(option);
                });
            }

            function attachEditEmployeeListeners() {
                document.querySelectorAll('.edit-employee-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const user = JSON.parse(btn.dataset.user);
                        
                        document.getElementById('edit-employee-id').value = user._id;
                        document.getElementById('edit-employee-name').value = user.name;
                        document.getElementById('edit-employee-login').value = user.login;
                        document.getElementById('edit-employee-hourlyRate').value = user.hourlyRate;
                        
                        populateSelect(document.getElementById('edit-employee-position'), positionOptions, user.position);
                        populateSelect(document.getElementById('edit-employee-workplace'), workplaceOptions, user.workplace);

                        editEmployeeModal.style.display = 'flex';
                    });
                });
            }
            
            cancelEditEmployeeBtn.addEventListener('click', () => editEmployeeModal.style.display = 'none');

            editEmployeeForm.addEventListener('submit', (e) => {
                 e.preventDefault();
                 alert('Dane pracownika zostaÅ‚yby zaktualizowane (wersja frontend-only).');
                 editEmployeeModal.style.display = 'none';
            });
            
            navigateTo(window.location.hash || '#nowe-zamowienie');
        });
    </script>
</body>
</html>
